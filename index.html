<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Document</title>
  </head>
  <body>
    <label for="txtName">Enter your name:</label>
    <input type="text" id="txtName" placeholder="Enter your name" />
    <label for="txtNights">Enter number of nights:</label>
    <input
      type="number"
      id="txtNights"
      placeholder="Enter number of nights"
    <label for="selRoom">Select Room:</label>
    <select id="selRoom">
      <option value="" disabled selected>Select room</option>
      <option value="Standard">Standard Room</option>
      <option value="Deluxe">Deluxe Room</option>
      <option value="Conference">Conference Room</option>
    </select>
    <button id="btnSubmit">SUBMIT</button><br /> <br>

    <table border="1px">
      <thead>
        <tr>
          <th>NAME OF CUSTOMER</th>
          <th>ROOM TYPE</th>
          <th>NUMBER OF NIGHTS</th>
          <th>ACTIONS</th>
        </tr>
      </thead>
      <tbody id="tblDisplay"></tbody>
    </table>

    <script>
      class Booking {
        constructor(name, roomType, nights) {
          this.name = name;
          this.roomType = roomType;
          this.nights = nights;
        }
      }

      let bookings = [];
      let txtName = document.getElementById("txtName");
      let txtNights = document.getElementById("txtNights");
      let selRoom = document.getElementById("selRoom");
      let tblDisplay = document.getElementById("tblDisplay");
      let btnSubmit = document.getElementById("btnSubmit");

      btnSubmit.addEventListener("click", () => {
        let name = txtName.value;
        let nights = parseInt(txtNights.value);
        let roomType = selRoom.value;

        if (!name || isNaN(nights) || nights <= 0 || !roomType) {
          alert("Please enter valid inputs.");
          return;
        }

        let newBooking = new Booking(name, roomType, nights);
        bookings.push(newBooking);
        updateTable();

        txtName.value = "";
        txtNights.value = "";
        selRoom.value = "";
      });

      function updateTable() {
        while (tblDisplay.firstChild) {
          tblDisplay.removeChild(tblDisplay.firstChild);
        }
        bookings.forEach((booking, index) => createTableRow(booking, index));
      }

      function createTableRow(booking, index) {
        let row = document.createElement("tr");

        let nameCell = document.createElement("td");
        nameCell.textContent = booking.name;

        let roomCell = document.createElement("td");
        roomCell.textContent = booking.roomType;

        let nightsCell = document.createElement("td");
        nightsCell.textContent = booking.nights;

        let actionsCell = document.createElement("td");
        let editButton = document.createElement("button");
        editButton.textContent = "Edit";
        let saveButton = document.createElement("button");
        saveButton.textContent = "Save";
        saveButton.style.display = "none";
        let deleteButton = document.createElement("button");
        deleteButton.textContent = "Delete";

        editButton.addEventListener("click", () =>
          editBooking(row, booking, saveButton, editButton)
        );
        saveButton.addEventListener("click", () =>
          saveBooking(row, booking, saveButton, editButton)
        );
        deleteButton.addEventListener("click", () => deleteBooking(index));

        actionsCell.append(editButton, saveButton, deleteButton);
        row.append(nameCell, roomCell, nightsCell, actionsCell);
        tblDisplay.appendChild(row);
      }

      function editBooking(row, booking, saveButton, editButton) {
        const nameInput = document.createElement("input");
        nameInput.value = booking.name;

        let roomSelect = document.createElement("select");
        ["Standard", "Deluxe", "Conference"].forEach((type) => {
          let option = document.createElement("option");
          option.value = type;
          option.textContent = type;
          if (type === booking.roomType) option.selected = true;
          roomSelect.appendChild(option);
        });

        let nightsInput = document.createElement("input");
        nightsInput.type = "number";
        nightsInput.value = booking.nights;

        row.children[0].replaceChildren(nameInput);
        row.children[1].replaceChildren(roomSelect);
        row.children[2].replaceChildren(nightsInput);

        saveButton.style.display = "inline";
        editButton.style.display = "none";
      }

      function saveBooking(row, booking, saveButton, editButton) {
        let nameInput = row.children[0].querySelector("input").value;
        let roomSelect = row.children[1].querySelector("select").value;
        let nightsInput = row.children[2].querySelector("input").value;

        if (!nameInput || !roomSelect || !nightsInput || isNaN(nightsInput)) {
          alert("Please enter valid values!");
          return;
        }

        booking.name = nameInput;
        booking.roomType = roomSelect;
        booking.nights = parseInt(nightsInput);

        updateTable();
      }

      function deleteBooking(index) {
        bookings.splice(index, 1);
        updateTable();
      }
    </script>
  </body>
</html>
